pkgname=emacs-evil-hg
pkgver=r1688
pkgrel=1
pkgdesc="An extensible vi layer for Emacs"
arch=('any')
url="https://gitorious.org/evil/pages/Home"
license=('GPLv2')
makedepends=('mercurial')
depends=('emacs' 'emacs-undo-tree')
conflicts=('emacs-evil' 'emacs-evil-git')
provides=('emacs-evil')
source=("$pkgname"::'hg+https://bitbucket.org/lyro/evil')
sha256sums=('SKIP')

pkgver() {
  cd "$srcdir/$pkgname"
  printf "r%s" "$(hg identify -n)"
}

build() {
  cd "$srcdir/$pkgname"
  make
}

package() {
  install -d $pkgdir/usr/share/emacs/site-lisp/evil
  cp $srcdir/$pkgname/*.el* $pkgdir/usr/share/emacs/site-lisp/evil
}
